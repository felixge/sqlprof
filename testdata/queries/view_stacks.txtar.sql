-- sample.sql --
select * from stacks order by stack_id limit 3;
-- sample.txt --
../testdata/testprog/go1.23.3.trace:
+----------+---------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stack_id |                                                                       funcs                                                                       |                                                                                                                      terse                                                                                                                      |                                                                                                                                                                                                                                                                                                                            full                                                                                                                                                                                                                                                                                                                            |
+----------+---------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|        1 | [runtime.traceLocker.Gomaxprocs runtime.StartTrace runtime/trace.Start github.com/felixge/sqlprof/internal/profile.StartTrace main.run main.main] | [runtime.traceLocker.Gomaxprocs (traceruntime.go:304) runtime.StartTrace (trace.go:283) runtime/trace.Start (trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (profile.go:51) main.run (main.go:47) main.main (main.go:17)] | [runtime.traceLocker.Gomaxprocs (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/traceruntime.go:304) runtime.StartTrace (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace.go:283) runtime/trace.Start (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace/trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/internal/profile/profile.go:51) main.run (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:47) main.main (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:17)] |
|        2 | [runtime.StartTrace runtime/trace.Start github.com/felixge/sqlprof/internal/profile.StartTrace main.run main.main]                                | [runtime.StartTrace (trace.go:284) runtime/trace.Start (trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (profile.go:51) main.run (main.go:47) main.main (main.go:17)]                                                      | [runtime.StartTrace (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace.go:284) runtime/trace.Start (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace/trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/internal/profile/profile.go:51) main.run (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:47) main.main (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:17)]                                                                                                         |
|        3 | [runtime.startTheWorld runtime.StartTrace runtime/trace.Start github.com/felixge/sqlprof/internal/profile.StartTrace main.run main.main]          | [runtime.startTheWorld (proc.go:1457) runtime.StartTrace (trace.go:306) runtime/trace.Start (trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (profile.go:51) main.run (main.go:47) main.main (main.go:17)]                 | [runtime.startTheWorld (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/proc.go:1457) runtime.StartTrace (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace.go:306) runtime/trace.Start (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/trace/trace.go:125) github.com/felixge/sqlprof/internal/profile.StartTrace (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/internal/profile/profile.go:51) main.run (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:47) main.main (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:17)]                 |
+----------+---------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
../testdata/testprog/go1.23.3.cpu.pprof:
+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stack_id |                                                                                                    funcs                                                                                                    |                                                                                                                                                                                            terse                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      full                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|        1 | [runtime.nanotime1 runtime.nanotime time.Since main.cpuHog.func1 runtime/pprof.Do main.cpuHog main.runSleep main.run main.main runtime.main]                                                                | [runtime.nanotime1 (sys_darwin.go:368) runtime.nanotime (time_nofake.go:33) time.Since (time.go:946) main.cpuHog.func1 (main.go:81) runtime/pprof.Do (runtime.go:51) main.cpuHog (main.go:79) main.runSleep (main.go:72) main.run (main.go:51) main.main (main.go:17) runtime.main (proc.go:272)]                                                                                           | [runtime.nanotime1 (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/sys_darwin.go:368) runtime.nanotime (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time_nofake.go:33) time.Since (/opt/homebrew/Cellar/go/1.23.3/libexec/src/time/time.go:946) main.cpuHog.func1 (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:81) runtime/pprof.Do (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/pprof/runtime.go:51) main.cpuHog (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:79) main.runSleep (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:72) main.run (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:51) main.main (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:17) runtime.main (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/proc.go:272)] |
|        2 | [runtime.kevent runtime.wakeNetpoll runtime.netpollBreak runtime.wakeNetPoller runtime.(*timer).maybeAdd runtime.(*timer).modify runtime.(*timer).reset runtime.resetForSleep runtime.park_m runtime.mcall] | [runtime.kevent (sys_darwin.go:498) runtime.wakeNetpoll (netpoll_kqueue_event.go:45) runtime.netpollBreak (netpoll_kqueue.go:79) runtime.wakeNetPoller (proc.go:3836) runtime.(*timer).maybeAdd (time.go:641) runtime.(*timer).modify (time.go:572) runtime.(*timer).reset (time.go:649) runtime.resetForSleep (time.go:308) runtime.park_m (proc.go:4089) runtime.mcall (asm_arm64.s:193)] | [runtime.kevent (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/sys_darwin.go:498) runtime.wakeNetpoll (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/netpoll_kqueue_event.go:45) runtime.netpollBreak [inlined] (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/netpoll_kqueue.go:79) runtime.wakeNetPoller (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/proc.go:3836) runtime.(*timer).maybeAdd (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time.go:641) runtime.(*timer).modify (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time.go:572) runtime.(*timer).reset [inlined] (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time.go:649) runtime.resetForSleep (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time.go:308) runtime.park_m (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/proc.go:4089) runtime.mcall (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/asm_arm64.s:193)]                                  |
|        3 | [runtime.nanotime time.Since main.cpuHog.func1 runtime/pprof.Do main.cpuHog main.runSleep main.run main.main runtime.main]                                                                                  | [runtime.nanotime (time_nofake.go:33) time.Since (time.go:946) main.cpuHog.func1 (main.go:81) runtime/pprof.Do (runtime.go:51) main.cpuHog (main.go:79) main.runSleep (main.go:72) main.run (main.go:51) main.main (main.go:17) runtime.main (proc.go:272)]                                                                                                                                 | [runtime.nanotime (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/time_nofake.go:33) time.Since (/opt/homebrew/Cellar/go/1.23.3/libexec/src/time/time.go:946) main.cpuHog.func1 (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:81) runtime/pprof.Do (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/pprof/runtime.go:51) main.cpuHog (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:79) main.runSleep (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:72) main.run (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:51) main.main (/Users/felix.geisendoerfer/go/src/github.com/felixge/sqlprof/testdata/testprog/main.go:17) runtime.main (/opt/homebrew/Cellar/go/1.23.3/libexec/src/runtime/proc.go:272)]                                                                                          |
+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
